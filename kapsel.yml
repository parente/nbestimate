name: nbestimate
# another change
description: Estimate of public ipynb files on GitHub
env_specs:
  default:
    packages:
      - python
      - jupyter
      - matplotlib
      - nbconvert
      - nomkl
      - pandas
      - requests
      - statsmodels
    channels:
      - conda-forge
      - defaults
commands:
  all:
    env_spec: default
    unix: >
        conda kapsel run update &&
        conda kapsel run render &&
        conda kapsel run push &&
        conda kapsel run show
  update:
    env_spec: default
    unix: open "https://github.com/search?q=extension%3Aipynb+nbformat_minor&ref=searchresu" && python update.py
  render:
    env_spec: default
    unix: jupyter-nbconvert --execute --to notebook --output estimate.ipynb estimate.src.ipynb
  push:
    env_spec: default
    unix: git commit -a -m "Update for $(date '+%Y-%m-%d')" && git push
  show:
    env_spec: default
    unix: open "http://nbviewer.jupyter.org/github/parente/nbestimate/blob/master/estimate.ipynb"
